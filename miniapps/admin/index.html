<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <base href="/admin/" />
    <title>LOOV Admin</title>
    <meta name="color-scheme" content="light dark" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <div class="app">
      <!-- Header -->
      <header class="header">
        <div class="header-top">
          <h1 class="logo">LOOV Admin</h1>
          <div class="status-badge" id="statusBadge">
            <span class="status-dot"></span>
            <span class="status-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
          </div>
        </div>
        
        <!-- Stats Cards -->
        <div class="stats-grid" id="statsGrid">
          <div class="stat-card">
            <div class="stat-value" id="statUsers">-</div>
            <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statGenerations">-</div>
            <div class="stat-label">–ì–µ–Ω–µ—Ä–∞—Ü–∏–π</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statPhones">-</div>
            <div class="stat-label">–° —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statEvents">-</div>
            <div class="stat-label">–ò–≤–µ–Ω—Ç –ø–æ–ø—ã—Ç–æ–∫</div>
          </div>
        </div>
      </header>

      <!-- Search & Filters -->
      <div class="toolbar">
        <div class="search-box">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ ID, username –∏–ª–∏ –∏–º–µ–Ω–∏..." />
        </div>
        <div class="toolbar-actions">
          <select id="sortSelect" class="select">
            <option value="generations">–ü–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–º</option>
            <option value="tries_remaining">–ü–æ –ø–æ–ø—ã—Ç–∫–∞–º</option>
            <option value="user_id">–ü–æ ID</option>
            <option value="username">–ü–æ username</option>
          </select>
          <button id="refreshBtn" class="btn btn-icon" title="–û–±–Ω–æ–≤–∏—Ç—å">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
              <path d="M3 3v5h5"/>
              <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/>
              <path d="M16 21h5v-5"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Users List -->
      <div class="users-list" id="usersList">
        <!-- Users will be rendered here -->
      </div>

      <!-- Load More -->
      <div class="load-more-container" id="loadMoreContainer">
        <button id="loadMoreBtn" class="btn btn-secondary">–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë</button>
        <div class="users-count" id="usersCount">0 –∏–∑ 0</div>
      </div>

      <!-- Empty State -->
      <div class="empty-state hidden" id="emptyState">
        <div class="empty-icon">üì≠</div>
        <div class="empty-title">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
        <div class="empty-text">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞</div>
      </div>

      <!-- Error State -->
      <div class="error-state hidden" id="errorState">
        <div class="error-icon">‚ö†Ô∏è</div>
        <div class="error-title" id="errorTitle">–û—à–∏–±–∫–∞</div>
        <div class="error-text" id="errorText">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</div>
        <button id="retryBtn" class="btn btn-primary">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
      </div>

      <!-- Loading State -->
      <div class="loading-state hidden" id="loadingState">
        <div class="spinner"></div>
        <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>
    </div>

    <!-- User Edit Modal -->
    <div class="modal-overlay hidden" id="modalOverlay">
      <div class="modal" id="userModal">
        <div class="modal-header">
          <h2 class="modal-title" id="modalTitle">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
          <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <div class="modal-body" id="modalBody">
          <!-- Modal content will be rendered here -->
        </div>
      </div>
    </div>

    <!-- Confirm Dialog -->
    <div class="modal-overlay hidden" id="confirmOverlay">
      <div class="modal modal-small">
        <div class="modal-header">
          <h2 class="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
        </div>
        <div class="modal-body">
          <p id="confirmText">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
          <div class="modal-actions">
            <button id="confirmCancel" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            <button id="confirmOk" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast hidden" id="toast">
      <span class="toast-message" id="toastMessage"></span>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>
