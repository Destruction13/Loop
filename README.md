# LOOV Telegram Bot

[üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (TL;DR)](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-tldr) ¬∑ [üß∞ –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS](#–ø–æ–ª–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–Ω–∞-vps) ¬∑ [üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–±–æ—Ç–∞) ¬∑ [üìÑ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è) ¬∑ [ü©∫ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (Self-Check)](#–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞-self-check) ¬∑ [üõ†Ô∏è –õ–æ–≥–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞](#–ª–æ–≥–∏-–∏-–ø–æ–¥–¥–µ—Ä–∂–∫–∞) ¬∑ [‚ùì FAQ –∏ —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏](#faq-–∏-—Ç–∏–ø–∏—á–Ω—ã–µ-–æ—à–∏–±–∫–∏) ¬∑ [üåê –í–µ–±—Ö—É–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)](#–≤–µ–±—Ö—É–∫–∏-–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (TL;DR)](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-tldr)
- [–ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS](#–ø–æ–ª–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–Ω–∞-vps)
- [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–±–æ—Ç–∞)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (Self-Check)](#–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞-self-check)
- [–õ–æ–≥–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞](#–ª–æ–≥–∏-–∏-–ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- [FAQ –∏ —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏](#faq-–∏-—Ç–∏–ø–∏—á–Ω—ã–µ-–æ—à–∏–±–∫–∏)
- [–í–µ–±—Ö—É–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)](#–≤–µ–±—Ö—É–∫–∏-–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (TL;DR)
–ì–æ—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Ubuntu 22.04/24.04. –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –±–ª–æ–∫–∞–º–∏, –æ—Ç –∏–º–µ–Ω–∏ –±—É–¥—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ—Ä–≤–∏—Å–∞.

```bash
apt update && apt upgrade -y
apt install -y git python3-venv python3-pip ffmpeg chrony

sudo mkdir -p /opt/loov
sudo chown "$USER":"$USER" /opt/loov
cd /opt/loov

# –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é
git clone https://example.com/your/loov.git .

python3 -m venv .venv
./.venv/bin/python -m pip install --upgrade pip
./.venv/bin/python -m pip install -r requirements.txt

cp .env.example .env
nano .env  # –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è

./scripts/selftest.sh
./scripts/run.sh  # –ø–µ—Ä–≤—ã–π —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º systemd-—é–Ω–∏—Ç
sudo cp deploy/loov.service /etc/systemd/system/loov.service
sudo sed -i "s/<USERNAME>/$USER/g" /etc/systemd/system/loov.service
sudo systemctl daemon-reload
sudo systemctl enable loov
sudo systemctl start loov

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl -u loov -f -n 200
```

## –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS
### –ß—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è
- **–û–°**: Ubuntu 22.04 LTS –∏–ª–∏ Ubuntu 24.04 LTS.
- **Python**: 3.10+ (–∏–∑ –∫–æ—Ä–æ–±–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –û–°).
- **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞**: `/opt/loov` (—Ä–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–ø–∏—Å–∞–Ω –≤ `deploy/loov.service`).
- **–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã**: long polling, –¥–æ–º–µ–Ω –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `git`, `python3-venv`, `python3-pip`, `ffmpeg`, `chrony` (–¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏). –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `./scripts/install.sh`, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.
2. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
   - –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ `/opt/loov`. –ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∞–≤–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å.
3. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - `python3 -m venv .venv` –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `./.venv/bin/python -m pip install -r requirements.txt`.
4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è¬ª). –§–∞–π–ª —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Google –ø–æ–ª–æ–∂–∏—Ç–µ —Ä—è–¥–æ–º, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ `.env`.
5. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**
   - `./scripts/run.sh` —Å—Ç–∞—Ä—Ç—É–µ—Ç –±–æ—Ç–∞ –≤ foreground. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∏ –ª–æ–≥–∏ —á–∏—Å—Ç—ã–µ.
6. **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd**
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `deploy/loov.service`, –∑–∞–º–µ–Ω–∏–≤ `<USERNAME>` –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ—Ç.
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —é–Ω–∏—Ç –≤ `/etc/systemd/system/`, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `systemctl daemon-reload`, `systemctl enable --now loov`.
7. **–ü—Ä–æ–≤–µ—Ä–∫–∞**
   - `journalctl -u loov -n 200` ‚Äî —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—à–∏–±–æ–∫ –Ω–µ—Ç.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
### –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
./scripts/update.sh
```
–°–∫—Ä–∏–ø—Ç:
- –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç systemd-—Å–µ—Ä–≤–∏—Å (–µ—Å–ª–∏ –æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω);
- –≤—ã–ø–æ–ª–Ω–∏—Ç `git pull` –≤–Ω—É—Ç—Ä–∏ `/opt/loov`;
- –æ–±–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `.venv`;
- —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å –∏–ª–∏ –ø–æ–¥—Å–∫–∞–∂–µ—Ç, –∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —é–Ω–∏—Ç, –µ—Å–ª–∏ –æ–Ω –µ—â—ë –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

### –†—É—á–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
```bash
sudo systemctl stop loov
cd /opt/loov
git pull --ff-only
./.venv/bin/python -m pip install -r requirements.txt
sudo systemctl start loov
```
–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞—Ç—å `./scripts/selftest.sh`, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
| –ò–º—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –ü—Ä–∏–º–µ—Ä |
| --- | --- | --- | --- |
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ –æ—Ç @BotFather | –î–∞ | `1234567890:ABCDEF...` |
| `SHEET_CSV_URL` | –ü—É–±–ª–∏—á–Ω–∞—è CSV-—Å—Å—ã–ª–∫–∞ Google Sheets (—Ñ–æ—Ä–º–∞—Ç `.../pub?output=csv`) | –î–∞ | `https://docs.google.com/.../pub?output=csv` |
| `LANDING_URL` | –°—Å—ã–ª–∫–∞ ¬´–ó–∞–ø–∏—Å–∞—Ç—å—Å—è¬ª, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º | –î–∞ | `https://loov.ru/book` |
| `SOCIAL_LINKS_JSON` | JSON-–º–∞—Å—Å–∏–≤ —Å—Å—ã–ª–æ–∫ —Å–æ—Ü—Å–µ—Ç–µ–π (`[{"title":"VK","url":"https://vk.com/..."}]`) | –î–∞ | `[{"title":"VK","url":"https://vk.com/loov"}]` |
| `NANOBANANA_API_KEY` | –ö–ª—é—á NanoBanana –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ—Ä–æ–∫ | –î–∞ | `nb_live_xxx` |
| `PROMO_CODE` | –¢–µ–∫—Å—Ç –ø—Ä–æ–º–æ–∫–æ–¥–∞, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è | –î–∞ (–º–æ–∂–Ω–æ –ø—É—Å—Ç—ã–º) | `"LOOV2024"` |
| `DAILY_TRY_LIMIT` | –õ–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ –≤ —Å—É—Ç–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –î–∞ | `50` |
| `CATALOG_ROW_LIMIT` | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –∫–∞—Ç–∞–ª–æ–≥–∞ (`0` = –±–µ–∑ –ª–∏–º–∏—Ç–∞) | –î–∞ | `0` |
| `PICK_SCHEME` | –†–µ–∂–∏–º –ø–æ–¥–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π | –î–∞ | `UNIVERSAL` |
| `GOOGLE_SHEET_URL` | URL —Ç–∞–±–ª–∏—Ü—ã Google –¥–ª—è –ª–∏–¥–æ–≤ | –î–∞ | `https://docs.google.com/spreadsheets/d/...` |
| `GOOGLE_SERVICE_ACCOUNT_JSON` | –ü—É—Ç—å –∫ JSON —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞) | –î–∞ | `service_account.json` |

> **–í–∞–∂–Ω–æ:** –ø—É—Ç—å `GOOGLE_SERVICE_ACCOUNT_JSON` –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ–≥–æ –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π, –¥–æ–±–∞–≤–ª—è—è `/opt/loov` (–∏–ª–∏ –≤–∞—à –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞). –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (`scp`/`sftp`) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ `chmod 600 service_account.json`, —á—Ç–æ–±—ã –¥–æ—Å—Ç—É–ø –±—ã–ª —Ç–æ–ª—å–∫–æ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (Self-Check)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `./scripts/selftest.sh` (–≤–Ω—É—Ç—Ä–∏ ‚Äî `python manage.py check`).
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, JSON —Å–æ—Ü—Å–µ—Ç–µ–π, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å CSV, –Ω–∞–ª–∏—á–∏–µ –≤–∏–¥–µ–æ, —Å–≤—è–∑—å —Å Telegram, –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `var/tmp`.
- –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –ø–æ–º–µ—á–∞–µ—Ç –ø—É–Ω–∫—Ç—ã –∏ –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–Ω–∞—á–∫–∞–º–∏:
  - ‚úÖ ‚Äî –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ;
  - ‚ö†Ô∏è ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ç–∏);
  - ‚ùå ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞, —Ç—Ä–µ–±—É—é—â–∞—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```text
=== Self-check –æ—Ç—á—ë—Ç ===
‚úÖ BOT_TOKEN: –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞: OK
‚úÖ DAILY_TRY_LIMIT: –õ–∏–º–∏—Ç: 50
‚ö†Ô∏è –ö–∞—Ç–∞–ª–æ–≥ CSV: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è: HTTPSConnectionPool(...)
‚ö†Ô∏è Promo video: –§–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç: /opt/loov/video/promo_start.mp4
‚ùå Google service account: –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ –ø—É—Ç–∏: /opt/loov/service_account.json
‚ùå –ò—Ç–æ–≥: –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
```
–ï—Å–ª–∏ –æ—Ç—á—ë—Ç –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å ‚ùå, —É—Å—Ç—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ.

## –õ–æ–≥–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ª–æ–≥–æ–≤ ‚Äî `journalctl -u loov -f -n 200`.
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é: `journalctl -u loov --since "1 hour ago"`.
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ `Promo video not found` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ–∞–π–ª `video/promo_start.mp4` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –±–æ—Ç –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Ä–æ–ª–∏–∫–∞.
- –û—à–∏–±–∫–∏ Google Sheets/Drive –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `loop_bot.leads_export` –∏–ª–∏ `loop_bot.contact_export`. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –¥–æ—Å—Ç—É–ø—ã —Ç–∞–±–ª–∏—Ü—ã.
- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –≤—Ä–µ–º–µ–Ω–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Google —Ä—É–≥–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–¥–ø–∏—Å—å) —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª—É–∂–±–∞ `chrony` –∞–∫—Ç–∏–≤–Ω–∞: `systemctl status chrony`.

## FAQ –∏ —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
### ¬´Invalid JWT Signature¬ª
- –§–∞–π–ª —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω –∏–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é.
- –í `.env` —É–∫–∞–∑–∞–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å –∫ `GOOGLE_SERVICE_ACCOUNT_JSON`.
- –°–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –Ω–µ –≤—ã–¥–∞–Ω –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ Google.
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ–≤–µ—Ä–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤—Ä–µ–º—è ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç–µ `sudo systemctl restart chrony` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç.

### ¬´promo_start.mp4 –Ω–µ –Ω–∞–π–¥–µ–Ω¬ª
- –ü–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª –≤ `video/promo_start.mp4` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞).
- –ï—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ –Ω—É–∂–Ω–æ, –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ ‚Äî –±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –≤ systemd
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `deploy/loov.service` —É–∫–∞–∑–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ `User` –∏ `Group`.
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `/opt/loov` –∏ —Ñ–∞–π–ª `service_account.json` –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ `var/tmp` –∏ `.venv`. –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –æ—Ç root, –∞ —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ (`chown -R`).

## –í–µ–±—Ö—É–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ë–æ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ long polling –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–º–µ–Ω–∞. –ï—Å–ª–∏ –ø–æ–∑–∂–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤–µ–±—Ö—É–∫:
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS-–¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ nginx + Let‚Äôs Encrypt –∏–ª–∏ Cloudflare Tunnel/ngrok).
2. –ü—Ä–æ–ø–∏—à–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–π URL –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ –∏–ª–∏ –æ–±—ë—Ä—Ç–∫–µ (–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ).
3. –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ systemd-—Å–µ—Ä–≤–∏—Å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç –≤ —Ä–µ–∂–∏–º–µ –≤–µ–±—Ö—É–∫–∞ —Å –Ω—É–∂–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ aiogram (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –∫–æ–¥–µ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏).

–ü–æ–∫–∞ –¥–æ–º–µ–Ω–∞ –Ω–µ—Ç ‚Äî –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é polling, –æ–Ω–∞ —É–∂–µ –≥–æ—Ç–æ–≤–∞ –∫ –±–æ–µ–≤–æ–º—É –∑–∞–ø—É—Å–∫—É –Ω–∞ VPS.
